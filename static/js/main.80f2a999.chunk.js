(this["webpackJsonpcorona-graphs"]=this["webpackJsonpcorona-graphs"]||[]).push([[0],{191:function(e,t,a){e.exports=a(394)},196:function(e,t,a){},198:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),o=a.n(c),l=(a(196),a(28)),s=a.n(l),i=a(61),u=a(9),h=a(10),d=a(11),p=a(12),f=a(13),v=a(87),b=a(3),m=a(90),y=(a(198),a(150)),C=a.n(y),g=a(44),w=a(16),k=["#FFFFFF","#F0A3FF","#0075DC","#993F00","#005C31","#2BCE48","#FFCC99","#808080","#94FFB5","#8F7C00","#9DCC00","#C20088","#FFA405","#FFA8BB","#426600","#FF0010","#5EF1F2","#00998F","#E0FF66","#740AFF","#990000","#FFFF80","#FFFF00","#FF5005"],E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).renderCustomizedLegend=function(e){var t=e.payload,n="",c=null;return r.a.createElement("div",{className:"customized-legend",style:{marginBottom:40}},t.map((function(e){n!==e.country?(n=e.country,c=r.a.createElement("span",{className:"Legend-country"},r.a.createElement("br",null),e.country,r.a.createElement("br",null))):c=null;var t=e.dataKey,o=e.color,l=e.label,s=a.state.disabled.includes(t),i={marginRight:10,color:s?"#000":"#AAA"};return r.a.createElement("span",null,c,r.a.createElement("span",{onClick:function(){return a.handleClick(t)},style:i},r.a.createElement(w.e,{width:20,height:20,style:{marginBottom:-4}},r.a.createElement(w.f,{cx:10,cy:10,type:"circle",size:50,fill:o}),s&&r.a.createElement(w.f,{cx:10,cy:10,type:"circle",size:25,fill:"#FFF"})),r.a.createElement("span",{className:"Legend-per-country"},l)))})))},a.state={scale:"linear"},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleClick",value:function(e){this.state.disabled.includes(e)?this.setState({disabled:this.state.disabled.filter((function(t){return t!==e}))}):this.setState({disabled:this.state.disabled.concat(e)})}},{key:"handleOptionChange",value:function(e){this.setState({scale:e}),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props.dataPoints;if(!t)return null;var a=t;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",{onClick:function(){return e.handleOptionChange("linear")}},r.a.createElement("input",{type:"radio",id:"linear",name:"scale",value:"linear",checked:"linear"===this.state.scale}),r.a.createElement("span",{style:{color:"#AAA"}},"Linear")),r.a.createElement("span",{onClick:function(){return e.handleOptionChange("log")}},r.a.createElement("input",{type:"radio",id:"log",name:"scale",value:"log",checked:"log"===this.state.scale}),r.a.createElement("span",{style:{color:"#AAA"}},"Log"))),r.a.createElement(w.d,{height:800,className:"chart-container"},r.a.createElement(w.c,{width:800,height:800,data:a,margin:{top:25,right:25,left:40,bottom:25}},this.state.chartLines.filter((function(t){return!e.state.disabled.includes(t.dataKey)})).map((function(e){return r.a.createElement(w.b,{connectNulls:!0,name:e.label,type:"monotone",dataKey:e.dataKey,stroke:e.color,yAxisId:0,dot:{r:2}})})),r.a.createElement(w.h,{dataKey:"date",textAnchor:"end",tick:{angle:-70,fontSize:20},height:225,padding:{right:3,left:3}}),r.a.createElement(w.i,{dataKey:this.state.yLabelPrioritizedKeys.filter((function(t){return!e.state.disabled.includes(t)}))[0],domain:"log"===this.state.scale?[1,"dataMax"]:[0,"dataMax"],tick:{fontSize:20},width:40,scale:this.state.scale,allowDataOverflow:!0,padding:{top:3,bottom:3}},"/>"),r.a.createElement(w.g,{formatter:function(e,t){return null===e?0:e},filterNull:!1,wrapperStyle:{borderColor:"white",boxShadow:"2px 2px 3px 0px rgb(204, 204, 204)"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)"},labelStyle:{fontWeight:"bold",color:"#666666"}}),r.a.createElement(w.a,{wrapperStyle:{top:550},align:"center",height:100,content:this.renderCustomizedLegend,payload:this.state.chartLines}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a,n,r=e.dataPoints,c=e.countries;if(!r||t.prevCountries===c)return null;if(t.prevCountries){for(var o=new Set(t.prevCountries),l=new Set(c),s=(a=o,n=l,new Set(Object(g.a)(a).filter((function(e){return!n.has(e)})))),i=t.chartLines.length-1;i>=0;i--)s.has(t.chartLines[i].country)&&(k.push(t.chartLines[i].color),t.chartLines.splice(t.chartLines.indexOf(t.chartLines[i]),1));for(var u=t.disabled.length-1;u>=0;u--){var h=!1,d=!0,p=!1,f=void 0;try{for(var v,b=s[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var m=v.value;t.disabled[u].includes(m)&&(h=!0)}}catch(j){p=!0,f=j}finally{try{d||null==b.return||b.return()}finally{if(p)throw f}}h&&t.disabled.splice(t.disabled.indexOf(t.disabled[u]),1)}}var y=t.chartLines||[],C=t.disabled||[],w=!0,E=!1,F=void 0;try{for(var x,O=c[Symbol.iterator]();!(w=(x=O.next()).done);w=!0){var D=x.value;(!t.prevCountries||t.prevCountries&&!t.prevCountries.includes(D))&&(y.push({country:D,dataKey:"newCases".concat(D),color:k.pop(),label:"New cases"}),y.push({country:D,dataKey:"newDeaths".concat(D),color:k.pop(),label:"New deaths"}),y.push({country:D,dataKey:"totalCases".concat(D),color:k.pop(),label:"Total cases"}),y.push({country:D,dataKey:"totalDeaths".concat(D),color:k.pop(),label:"Total deaths"}),C.push("totalCases".concat(D)),C.push("totalDeaths".concat(D)))}}catch(j){E=!0,F=j}finally{try{w||null==O.return||O.return()}finally{if(E)throw F}}var S=function(e,t){var a={},n=!0,r=!1,c=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;a["newCases".concat(s)]=0,a["totalCases".concat(s)]=0,a["totalDeaths".concat(s)]=0,a["newDeaths".concat(s)]=0;var i=!0,u=!1,h=void 0;try{for(var d,p=e[Symbol.iterator]();!(i=(d=p.next()).done);i=!0){var f=d.value;f["newCases".concat(s)]>a["newCases".concat(s)]&&(a["newCases".concat(s)]=f["newCases".concat(s)]),f["totalCases".concat(s)]>a["totalCases".concat(s)]&&(a["totalCases".concat(s)]=f["totalCases".concat(s)]),f["totalDeaths".concat(s)]>a["totalDeaths".concat(s)]&&(a["totalDeaths".concat(s)]=f["totalDeaths".concat(s)]),f["newDeaths".concat(s)]>a["newDeaths".concat(s)]&&(a["newDeaths".concat(s)]=f["newDeaths".concat(s)])}}catch(j){u=!0,h=j}finally{try{i||null==p.return||p.return()}finally{if(u)throw h}}}}catch(j){r=!0,c=j}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return Object.keys(a).map((function(e){return{key:e,value:a[e]}})).sort((function(e,t){return t.value-e.value})).map((function(e){return e.key}))}(r,c);return{chartLines:y,disabled:C,prevCountries:c,yLabelPrioritizedKeys:S}}}]),t}(n.Component),F=function(e){return 0===Number(e)?null:Number(e)},x=a(161),O="https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/full_data.csv",D=[{value:"Italy",label:"Italy"},{value:"Spain",label:"Spain"}],S=function(e){var t={},a={},n=String(e).split("\n"),r=!0,c={},o=!0,l=!1,s=void 0;try{for(var i,u=n[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var h=i.value;if(r)r=!1;else{var d=h.split(","),p=Object(m.a)(d,6),f=p[0],y=p[1],C=p[2],g=p[3],w=p[4],k=p[5];if(y){if(a[y]=!0,!c[y]){if(0===Number(C)&&0===Number(g)&&0===Number(w)&&0===Number(k))continue;c[y]=!0}var E=new Date(f).toISOString().substring(0,10);if(t[E]){var x,O=t[E];t[E]=Object(v.a)((x={},Object(b.a)(x,"newCases".concat(y),F(C)),Object(b.a)(x,"newDeaths".concat(y),F(g)),Object(b.a)(x,"totalCases".concat(y),F(w)),Object(b.a)(x,"totalDeaths".concat(y),F(k)),x),O)}else{var D;t[E]=(D={date:E},Object(b.a)(D,"newCases".concat(y),F(C)),Object(b.a)(D,"newDeaths".concat(y),F(g)),Object(b.a)(D,"totalCases".concat(y),F(w)),Object(b.a)(D,"totalDeaths".concat(y),F(k)),D)}}}}}catch(S){l=!0,s=S}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}return[Object.values(t).sort((function(e,t){return e.date.localeCompare(t.date)})),Object.keys(a)]},j={option:function(e,t){return Object(v.a)({},e,{color:t.isSelected?"orange":"black"})}},A=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectableCountries:D,currentCountries:D},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"getData",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,r,c,o,l,i,u,h,d,p,f,v,b,m,y,C,g,w;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this.setState({currentCountries:[],multiCountryData:null}),e.abrupt("return");case 3:if(a=this.state.newParsedData,n=[],!t){e.next=63;break}r=!1,c=0,o=Object.values(a);case 8:if(!(c<o.length)){e.next=63;break}l=o[c],i=!0,u=!1,h=void 0,e.prev=13,d=t[Symbol.iterator]();case 15:if(i=(p=d.next()).done){e.next=23;break}if(f=p.value,!l["newCases".concat(f.value)]){e.next=20;break}return r=!0,e.abrupt("break",23);case 20:i=!0,e.next=15;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(13),u=!0,h=e.t0;case 29:e.prev=29,e.prev=30,i||null==d.return||d.return();case 32:if(e.prev=32,!u){e.next=35;break}throw h;case 35:return e.finish(32);case 36:return e.finish(29);case 37:if(!r){e.next=60;break}for(v={},b=!0,m=!1,y=void 0,e.prev=42,C=t[Symbol.iterator]();!(b=(g=C.next()).done);b=!0)w=g.value,v["newCases".concat(w.value)]=l["newCases".concat(w.value)]||null,v["newDeaths".concat(w.value)]=l["newDeaths".concat(w.value)]||null,v["totalCases".concat(w.value)]=l["totalCases".concat(w.value)]||null,v["totalDeaths".concat(w.value)]=l["totalDeaths".concat(w.value)]||null;e.next=50;break;case 46:e.prev=46,e.t1=e.catch(42),m=!0,y=e.t1;case 50:e.prev=50,e.prev=51,b||null==C.return||C.return();case 53:if(e.prev=53,!m){e.next=56;break}throw y;case 56:return e.finish(53);case 57:return e.finish(50);case 58:v.date=l.date,n.push(v);case 60:c++,e.next=8;break;case 63:this.setState({currentCountries:t,multiCountryData:n});case 64:case"end":return e.stop()}}),e,this,[[13,25,29,37],[30,,32,36],[42,46,50,58],[51,,53,57]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(O));case 2:return t=e.sent,a=S(t.data),n=Object(m.a)(a,2),r=n[0],c=n[1],o=c.map((function(e){return{value:e,label:e}})),this.setState({selectableCountries:o,newParsedData:r}),e.next=8,this.getData(D);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_onChange",value:function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.selectableCountries,n=t.currentCountries,c=t.multiCountryData;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Top-left"},"Source code on: ",r.a.createElement("a",{href:"https://github.com/mathiastj/corona-graphs"},"Github")),r.a.createElement("div",{className:"Top-right"},"Sources: ECDC via ",r.a.createElement("a",{href:O},"OWID")," under ",r.a.createElement("a",{href:"https://creativecommons.org/licenses/by/4.0/"},"CC BY 4.0")),r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{style:{width:"75%"}},r.a.createElement(x.a,{isMulti:!0,options:a,onChange:function(t){return e._onChange(t)},defaultValue:D,styles:j,value:n})),r.a.createElement("div",{style:{width:"95%",height:"90%"}},r.a.createElement(E,{dataPoints:c,countries:n.map((function(e){return e.value}))}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[191,1,2]]]);
//# sourceMappingURL=main.80f2a999.chunk.js.map